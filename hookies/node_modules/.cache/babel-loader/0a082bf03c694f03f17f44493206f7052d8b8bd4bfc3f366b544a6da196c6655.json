{"ast":null,"code":"function getAccessToken(refreshToken, callback) {\n  fetch('http://127.0.0.1:8000/auth_api/refresh', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8'\n    },\n    body: JSON.stringify({\n      \"refresh\": refreshToken\n    })\n  }).then(res => res.json()).then(data => callback(data));\n}\nfunction apiLogin(username, password) {\n  fetch('http://127.0.0.1:8000/auth_api/token', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8'\n    },\n    body: JSON.stringify({\n      \"username\": username,\n      \"password\": password\n    })\n  }).then(res => res.json()).then(data => {\n    if (data[\"detail\"]) {\n      alert(\"Wrong username or password\");\n      return;\n    }\n    localStorage.setItem(\"refresh_token\", data[\"refresh\"]);\n    localStorage.setItem(\"is_authorized\", \"authorized\");\n    localStorage.setItem(\"username\", username);\n    apiGetUserData(username, password, data => {\n      console.log(\"userdata\" + data);\n      localStorage.setItem(\"email\", data[\"email\"]);\n      localStorage.setItem(\"fullname\", data[\"fullname\"]);\n      localStorage.setItem(\"date_of_birth\", data[\"date_of_birth\"]);\n      window.location.href = \"/account\";\n    });\n  });\n}\nfunction apiGetUserData(username, password, callback) {\n  //return {\"email\": \"api_user_email\", \"fullname\": \"api_user_fullname\", \"date_of_birth\": \"api_user_date_of_birth\"};\n  getAccessToken(localStorage.getItem(\"refresh_token\"), data => {\n    fetch('http://127.0.0.1:8000/api/userinfo/', {\n      headers: {\n        'Authorization': `Bearer ${data[\"access\"]}`\n      }\n    }).then(res => res.json()).then(data => {\n      console.log(\"getuserdata\" + data);\n      callback(data);\n    });\n  });\n}\nfunction apiGetUserFiles(username, password) {\n  getAccessToken(localStorage.getItem(\"refresh_token\"), data => {\n    fetch('http://127.0.0.1:8000/api/userfiles/', {\n      headers: {\n        'Authorization': `Bearer ${data[\"access\"]}`\n      }\n    }).then(res => res.json()).then(data => {\n      console.log(\"getuserdata\" + data);\n      callback(data);\n    });\n  });\n}\nfunction apiUploadFile(username, fileName, originalName, fileText) {\n  alert(\"Загружаем файл \" + originalName + \" (также известен как \" + fileName + \") для юзера \" + username + \" с текстом:\\n\" + fileText);\n}\nfunction apiRegister(username, password, fullname, email, date_of_birth) {\n  return 1;\n}\nfunction apiDownloadFile(fileId) {\n  let fileContent = \"contentfromsite\" + fileId;\n  let fileName = \"filename.fromsite\";\n  let fileExtension = \".txt\";\n  const file = new File([fileContent], fileName + fileExtension, {\n    type: 'text/plain'\n  });\n  const link = document.createElement('a');\n  const url = URL.createObjectURL(file);\n  link.href = url;\n  link.download = file.name;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  window.URL.revokeObjectURL(url);\n}\nfunction apiDeleteFile(fileId) {\n  alert(\"Deleting file with id \" + fileId);\n}\nfunction apiSearch(fileName, author, dateFrom, dateTo) {\n  return [{\n    \"id\": \"1\",\n    \"filename\": \"просто_приставка_вначале_\" + fileName,\n    \"author\": author\n  }, {\n    \"id\": \"2\",\n    \"filename\": fileName,\n    \"author\": \"просто_приставка_вначале_\" + author\n  }];\n}\nmodule.exports = {\n  apiLogin,\n  apiGetUserData,\n  apiGetUserFiles,\n  apiUploadFile,\n  apiRegister,\n  apiDownloadFile,\n  apiDeleteFile,\n  apiSearch\n};","map":{"version":3,"names":["getAccessToken","refreshToken","callback","fetch","method","headers","body","JSON","stringify","then","res","json","data","apiLogin","username","password","alert","localStorage","setItem","apiGetUserData","console","log","window","location","href","getItem","apiGetUserFiles","apiUploadFile","fileName","originalName","fileText","apiRegister","fullname","email","date_of_birth","apiDownloadFile","fileId","fileContent","fileExtension","file","File","type","link","document","createElement","url","URL","createObjectURL","download","name","appendChild","click","removeChild","revokeObjectURL","apiDeleteFile","apiSearch","author","dateFrom","dateTo","module","exports"],"sources":["/home/gordei/VSprojects/FULLSTACK/Project/hookies/src/components/api/Api.js"],"sourcesContent":["function getAccessToken(refreshToken, callback) {\n  fetch('http://127.0.0.1:8000/auth_api/refresh',{\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n    },\n    body: JSON.stringify({\"refresh\": refreshToken})\n})\n.then(res => res.json())\n.then(data => callback(data))\n}\n\nfunction apiLogin(username, password) {\n  fetch('http://127.0.0.1:8000/auth_api/token',{\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n    },\n    body: JSON.stringify({\"username\": username, \"password\": password })\n  })\n  .then(res => res.json())\n  .then(data => {\n    if (data[\"detail\"]) {\n      alert(\"Wrong username or password\");\n      return;\n    }\n    localStorage.setItem(\"refresh_token\", data[\"refresh\"]);\n    localStorage.setItem(\"is_authorized\", \"authorized\");\n    localStorage.setItem(\"username\", username);\n    apiGetUserData(username, password, (data) => {\n      console.log(\"userdata\" + data);\n      localStorage.setItem(\"email\", data[\"email\"]);\n      localStorage.setItem(\"fullname\", data[\"fullname\"]);\n      localStorage.setItem(\"date_of_birth\", data[\"date_of_birth\"]);\n      window.location.href = \"/account\";\n    });\n  })\n}\n\nfunction apiGetUserData(username, password, callback) {\n  //return {\"email\": \"api_user_email\", \"fullname\": \"api_user_fullname\", \"date_of_birth\": \"api_user_date_of_birth\"};\n  getAccessToken(localStorage.getItem(\"refresh_token\"), (data) => {\n    fetch('http://127.0.0.1:8000/api/userinfo/', {\n      headers: {\n          'Authorization': `Bearer ${data[\"access\"]}`\n      }\n    })\n    .then(res => res.json())\n    .then(data => {\n      console.log(\"getuserdata\" + data);\n      callback(data);\n    })\n  });\n}\n\n\nfunction apiGetUserFiles(username, password) {\n  getAccessToken(localStorage.getItem(\"refresh_token\"), (data) => {\n    fetch('http://127.0.0.1:8000/api/userfiles/', {\n      headers: {\n          'Authorization': `Bearer ${data[\"access\"]}`\n      }\n    })\n    .then(res => res.json())\n    .then(data => {\n      console.log(\"getuserdata\" + data);\n      callback(data);\n    })\n  });\n}\n\nfunction apiUploadFile(username, fileName, originalName, fileText) {\n  alert(\"Загружаем файл \" + originalName + \" (также известен как \" + fileName + \") для юзера \" + username + \" с текстом:\\n\" + fileText);\n}\n\nfunction apiRegister(username, password, fullname, email, date_of_birth) {\n  return 1;\n}\n\nfunction apiDownloadFile(fileId) {\n  let fileContent = \"contentfromsite\" + fileId;\n  let fileName = \"filename.fromsite\";\n  let fileExtension = \".txt\";\n\n  const file = new File([fileContent], fileName + fileExtension, {\n    type: 'text/plain',\n  })\n  const link = document.createElement('a');\n  const url = URL.createObjectURL(file);\n  link.href = url;\n  link.download = file.name;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  window.URL.revokeObjectURL(url);\n}\n\nfunction apiDeleteFile(fileId) {\n  alert(\"Deleting file with id \" + fileId);\n}\n\nfunction apiSearch(fileName, author, dateFrom, dateTo) {\n  return [\n    {\"id\": \"1\", \"filename\": \"просто_приставка_вначале_\" + fileName, \"author\": author},\n    {\"id\": \"2\", \"filename\": fileName, \"author\": \"просто_приставка_вначале_\" + author}\n  ];\n}\n\nmodule.exports = { apiLogin, apiGetUserData, apiGetUserFiles, apiUploadFile, apiRegister, apiDownloadFile, apiDeleteFile, apiSearch };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}